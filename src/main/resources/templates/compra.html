<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra | Epic Games</title>

    <link rel="icon" type="image/png" th:href="@{/img/logosteam.png}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link th:href="@{/css/estilos.css}" rel="stylesheet">

    <style>
        :root { --bs-dark-rgb: 11, 29, 58; }
        .game-img { height: 300px; object-fit: cover; border: 1px solid rgba(0, 210, 255, 0.3); }
        .form-control[readonly] { background-color: rgba(255,255,255,0.05); color: #fff; border-color: rgba(255,255,255,0.1); }
    </style>
</head>

<body class="bg-dark">
    <div id="contenedor">
        <header th:replace="~{componentes/cabecera :: header}"></header>

        <div class="layout d-flex">
            <aside th:replace="~{componentes/menu :: menu}"></aside>

            <main class="content py-3 container-fluid">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <h4 class="m-0 text-light">Detalle de Compra</h4>
                </div>

                <section class="card bg-transparent border-0">
                    <div class="row align-items-center">

                        <div class="col-12 col-md-4 text-center mb-3">
                            <img th:src="@{'/img/juegos/' + ${p.idJuego} + '.png'}"
                                 class="img-fluid rounded shadow game-img" 
                                 alt="Imagen del juego"
                                 onerror="this.src='/img/juegos/no-imagen.png'">
                        </div>

                        <div class="col-12 col-md-8 text-light">
                            <h3 class="mb-3 text-info" th:text="${p.titulo}">Título del Juego</h3>

                            <form th:action="@{/epicgames/carrito/agregar}" method="post" class="row g-3">

                                <input type="hidden" name="idJuego" th:value="${p.idJuego}">

                                <div class="col-12 col-md-4">
                                    <label class="form-label small opacity-75">Código</label> 
                                    <input type="text" class="form-control" th:value="${p.idJuego}" readonly>
                                </div>

                                <div class="col-12 col-md-8">
                                    <label class="form-label small opacity-75">Categoría</label> 
                                    <input type="text" class="form-control" th:value="${p.objCategoria?.nom_categoria}" readonly>
                                </div>

                                <div class="col-12">
                                    <label class="form-label small opacity-75">Descripción</label>
                                    <textarea class="form-control" rows="3" th:text="${p.descripcion}" readonly></textarea>
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label small opacity-75">Precio</label> 
                                    <input type="text" class="form-control fw-bold"
                                        th:value="${'S/ ' + #numbers.formatDecimal(p.precio, 1, 2)}" readonly>
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label small text-info">Cantidad</label> 
                                    <input type="number" name="cantidad" class="form-control" min="1" value="1" required>
                                    <div class="form-text text-light opacity-50 small">Mínimo 1 unidad</div>
                                </div>

                                <div class="col-12 text-end mt-4">
                                    <a th:href="@{/epicgames/catalogo}" class="btn btn-outline-light me-2">Volver</a>
                                    <button type="submit" class="btn btn-primary px-4">
                                        <i class="bi bi-cart-plus"></i> Agregar al carrito
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <footer class="footer py-3 text-center border-top border-light border-opacity-10 mt-5">
            <p class="mb-0 small text-light text-opacity-50">Derechos Reservados. Lima, Perú - 2026</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>