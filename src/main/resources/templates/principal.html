<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo de Géneros | Epic Games</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link th:href="@{/css/estilos.css}" rel="stylesheet">

<style>
  :root {
    --bs-dark-rgb: 11, 29, 58;
  }
  .genre-img {
    height: 220px;
    object-fit: cover;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  .card {
    border-radius: 14px;
    transition: transform 0.3s ease, border-color 0.3s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    border-color: #0dcaf0 !important;
  }
  body {
    background-color: #0b1d3a; /* Color según tu root */
  }
</style>
</head>

<body class="bg-dark text-light">

  <header th:replace="~{componentes/cabecera :: header}"></header>

  <div id="contenedor">
    <div class="layout d-flex">
      
      <aside th:replace="~{componentes/menu :: menu}"></aside>

      <main class="content py-4 container-fluid">
        
        <div class="d-flex align-items-center justify-content-between mb-4">
            <h4 class="text-light m-0">Explorar por Géneros</h4>
            <span class="badge text-bg-info" th:text="${#lists.size(lstCategorias.?[idEstado == 1])} + ' Disponibles'">0</span>
        </div>

        <div class="row row-cols-1 row-cols-md-3 g-4">

          <div class="col" th:each="c : ${lstCategorias}" th:if="${c.idEstado == 1}">
            <div class="card bg-dark text-light h-100 shadow border border-light border-opacity-10">
              
              <img th:src="@{'/img/categorias/' + ${c.id_categoria} + '.png'}" 
                   class="card-img-top genre-img" 
                   alt="Imagen de género"
                   onerror="this.src='/img/categorias/no-imagen.png'">

              <div class="card-body">
                <h5 class="card-title" th:text="${c.nom_categoria}">Nombre del Género</h5>
                <p class="card-text small text-light text-opacity-75" th:text="${c.descripcion}">
                  Descripción cargada desde la base de datos.
                </p>
              </div>

              <div class="card-footer bg-transparent border-0 text-end pb-3">
                <a th:href="@{/epicgames/catalogo/categoria/{id}(id=${c.id_categoria})}" 
                   class="btn btn-outline-info btn-sm">
                  <i class="bi bi-controller"></i> Explorar
                </a>
              </div>
            </div>
          </div>

        </div>

        <div th:if="${#lists.isEmpty(lstCategorias.?[idEstado == 1])}" class="alert alert-warning mt-5 text-center">
            <i class="bi bi-exclamation-triangle"></i> No hay categorías activas registradas.
        </div>

      </main>
    </div>

    <footer class="footer py-4 text-center border-top border-light border-opacity-10 mt-5">
      <i class="bi bi-tiktok fs-2 m-2"></i>
      <i class="bi bi-facebook fs-2 m-2"></i>
      <i class="bi bi-youtube fs-2 m-2"></i>
      <p class="mb-0 text-opacity-50">Derechos Reservados. Lima, Perú - 2026</p>
    </footer>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>